<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Structural Terminal (Dark Tile Theme)</title>

  <!-- 1) Link to an external CSS file (you can also inline this if you prefer) -->
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <!-- 
    2) Wrap everything in a "page-container" with a dark background.
       We'll use CSS Grid to lay out the terminal and the guide side by side,
       and let the "output tile" expand below.
  -->
  <div class="page-container">
    <!-- LEFT COLUMN: Input + Suggestions -->
    <div class="panel input-panel">
      <div class="prompt-row">
        <span class="prompt-symbol">&gt;</span>
        <input id="terminalInput" class="prompt-input" type="text" placeholder="Loading data…" disabled />
      </div>

      <div id="suggestions" class="suggestions-panel">
        <!-- Suggestion items will be injected here -->
      </div>
    </div>

    <!-- MIDDLE COLUMN: Output “tiles” will show up here -->
    <!-- We’ll append each new command‐output as its own "output-tile" in this container. -->
    <div id="outputContainer" class="panel output-grid">
      <!-- Example of a “tile” (you can append many of these) -->
      <!--
      <div class="output-tile">
        <div class="tile-header">&gt; W12X16</div>
        <table class="result-table">
          <tr><td>bf</td><td>4.00</td></tr>
          <tr><td>tf</td><td>0.31</td></tr>
          <!-- ...more rows... -->
        </table>
      </div>
      -->
    </div>

    <!-- RIGHT COLUMN: Quick Guide / Instructions -->
    <div class="panel guide-panel">
      <h2>Quick Guide</h2>
      <ul class="guide-list">
        <li><strong>W&lt;d&gt;X&lt;w&gt;</strong> &mdash; show W‐shape properties</li>
        <li><strong>MC&lt;d&gt;X&lt;w&gt;</strong> &mdash; show MC‐shape properties</li>
        <li><strong>W&lt;d&gt;X&lt;w&gt; LR</strong> &mdash; prompt for Fy, then show L<sub>r</sub></li>
        <li><strong>W&lt;d&gt;X&lt;w&gt; Lp</strong> &mdash; prompt for Fy, then show L<sub>p</sub></li>
      </ul>
    </div>
  </div>

  <!-- 3) Your existing JavaScript (unchanged logic, but it will now write into #outputContainer) -->
  <script>
    // … All of your previous JS (fetching JSON, showSuggestions, Enter key logic, etc.) …

    // A small rewrite of how we display a result: instead of writing into a single #terminalOutput,
    // we create a “tile” <div> for each new command and append it to #outputContainer.

    function displayResultTile(command, sourceType, dataObj) {
      // Create a new tile wrapper
      const tile = document.createElement('div');
      tile.className = 'output-tile';

      // 1) Header row with the prompt
      const header = document.createElement('div');
      header.className = 'tile-header';
      header.innerHTML = `&gt; ${command} <span class="source-label">(${sourceType}-shape)</span>`;
      tile.appendChild(header);

      // 2) If dataObj is a plain field list, build a table
      const table = document.createElement('table');
      table.className = 'result-table';
      Object.entries(dataObj).forEach(([key, val]) => {
        const row = document.createElement('tr');
        const c1 = document.createElement('td');
        c1.textContent = key;
        const c2 = document.createElement('td');
        c2.textContent = val;
        row.append(c1, c2);
        table.appendChild(row);
      });
      tile.appendChild(table);

      // 3) Copy-to-Clipboard button
      const copyBtn = document.createElement('button');
      copyBtn.className = 'copy-button';
      copyBtn.textContent = 'Copy to Excel';
      copyBtn.onclick = function() { copyTableToClipboard(copyBtn); };
      tile.appendChild(copyBtn);

      // 4) Finally, append this tile to the grid container
      document.getElementById('outputContainer').prepend(tile);
      // We prepend so that newest tiles appear at the top. Use appendChild(...) if you prefer bottom-up.
    }

    // Then, in your Enter‐key handler, instead of writing to #terminalOutput, call displayResultTile(...)
    // For example, replace:
    //    outputDiv.innerHTML = `<div class="search-header">…</div> …`
    // with:
    //    displayResultTile(cmd, sourceType, dataObj);
  </script>
</body>
</html>